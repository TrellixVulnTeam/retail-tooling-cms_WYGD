!function(t){t.fn.gridEditor=function(e){var n=this.data("grideditor"),a=0;if("getHtml"==arguments[0]){if(n){n.deinit();var o=this.html();return n.init(),o}return this.html()}return"deinit"==arguments[0]&&n?(n.deinit(),t(".ge-mainControls").remove(),void t(".ge-html-output").remove()):(this.each(function(n,o){o=t(o);var i,r,l,s,c=t.extend({new_row_layouts:[[12],[6,6],[4,4,4],[3,3,3,3],[2,2,2,2,2,2],[2,8,2],[4,8],[8,4]],row_classes:[{label:"Example class",cssClass:"example-class"}],col_classes:[{label:"Example class",cssClass:"example-class"}],col_tools:[],row_tools:[],custom_filter:"",editor_types:["tinymce"],valid_col_sizes:[1,2,3,4,5,6,7,8,9,10,11,12],source_textarea:"",content_types:[{id:"text",label:"Tekst"},{id:"rich-text",label:"Opgemaakte tekst"},{id:"list",label:"Lijst"},{id:"quote",label:"Annotatie"},{id:"image",label:"Afbeelding"},{id:"image-list",label:"Meerdere afbeeldingen"},{id:"warning",label:"Waarschuwing"}],template_types:[{id:"basic",label:"Basic"},{id:"collapsible",label:"Collapsible"}],default_content_type_id:"text"},e),d=["col-md-","col-sm-","col-xs-"],p=0,u=12;if(c.source_textarea){var h=t(c.source_textarea);h.addClass("ge-html-output"),s=h,h.val()&&o.html(h.val())}if(o.children().length&&!o.find("div.row").length){var m=o.children();t('<div class="row"><div class="col-md-12"/></div>').appendTo(o).find(".col-md-12").append(m)}!function(){i=o.addClass("ge-canvas"),void 0!==s&&s.length||(s=t('<textarea class="ge-html-output"/>').insertBefore(i));r=t('<div class="ge-mainControls" />').insertBefore(s);var e=t('<div class="ge-wrapper ge-top" />').appendTo(r),n=t('<div id="preview-controls" class="form-inline"></div>').appendTo(e),a=t('<div class="form-group"></div>').appendTo(n),d=t('<div class="dropdown ge-layout-mode"><label for="layout-type-select">Preview size: </label><button id="layout-type-select" type="button" class="btn btn-md btn-secondary dropdown-toggle" data-toggle="dropdown"><span>Desktop</span></button><ul class="dropdown-menu" role="menu"><li><a data-width="auto" title="Desktop"><span>Desktop</span></a></li><li><a title="Tablet"><span>Tablet</span></li><li><a title="Phone"><span>Phone</span></a></li></ul></div>').on("click","a",function(){var e=t(this);I(e.closest("li").index());var n=d.find("button");n.find("span").remove(),n.append(e.find("span").clone())}).appendTo(a),p=t('<div id="preview-content" class="dropdown ge-content-mode"><label for="preview-content-select">Preview content: </label><button id="preview-content-select" type="button" class="btn btn-md btn-secondary dropdown-toggle" data-toggle="dropdown"><span>George Orwell - 1984</span></button><ul class="dropdown-menu" role="menu"></ul></div>').on("click","a",function(){var e=t(this),n=p.find("button");n.find("span").remove(),n.append(e.find("span").clone())}).appendTo(a);l=t('<div class="ge-addRowGroup btn-group" />').appendTo(e),t.each(c.new_row_layouts,function(e,n){var a=t('<a class="btn btn-md btn-primary" />').attr("title","Add row "+n.title).on("click",function(){var e,a=(e=n.title,t('<div class="row" data-id="'+j(e)+'" data-title="'+e+'" />')).appendTo(i);n.cols.forEach(function(t){C(t.count,t.type).appendTo(a)}),f()}).appendTo(l);a.append('<span class="glyphicon glyphicon-plus-sign"/>');var o=n.title;n.cols&&n.cols.forEach(function(t){'<div class="column col-xs-'+t+'"/>'}),a.append(o)});t('<div class="btn-group pull-right"/>').appendTo(e);var u=t('<button title="Edit Source Code" type="button" class="btn btn-md btn-primary gm-edit-mode"><span class="glyphicon glyphicon-chevron-left"></span><span class="glyphicon glyphicon-chevron-right"></span></button>').on("click",function(){u.hasClass("active")?(i.empty().html(s.val()).show(),f(),s.hide()):(v(),s.height(.8*t(window).height()).val(i.html()).show(),i.hide()),u.toggleClass("active btn-danger")}),h=t('<button title="Preview" type="button" class="btn btn-md btn-primary gm-preview"><span class="glyphicon glyphicon-eye-open"></span></button>').on("mouseenter",function(){i.removeClass("ge-editing")}).on("click",function(){h.toggleClass("active btn-danger").trigger("mouseleave")}).on("mouseleave",function(){h.hasClass("active")||i.addClass("ge-editing")});i.on("mouseenter",".row > .ge-tools-drawer",function(e){t(this).parent().find("> .ge-tools-drawer a").show(),t(this).parent().find(".template-type").show()}),i.on("mouseleave",".row > .ge-tools-drawer",function(e){t(this).parent().find("> .ge-tools-drawer a").hide(),t(this).parent().find(".template-type").hide(),t(this).parent().find(".content-type").hide(),t(this).parent().find(".ge-details").hide()}),i.on("mouseenter",".column",function(e){t(this).find("> .ge-tools-drawer > a").show(),t(this).find(".content-type").show()}),i.on("mouseleave",".column",function(e){t(this).find("> .ge-tools-drawer > a").hide(),t(this).find(".content-type").hide(),t(this).find(".ge-details").hide()})}(),f();function f(){T(!0),i.addClass("ge-editing"),i.find('.column, div[class*="col-"]').each(function(){var e=t(this),n=2,a=w(e);a.length&&(n=a[0].size);var o=e.attr("class");d.forEach(function(t){-1==o.indexOf(t)&&e.addClass(t+n)}),e.addClass("column")}),i.find(".column").each(function(){var e=t(this),n=t();e.children().each(function(){var e=t(this);e.is(".row, .ge-tools-drawer, .ge-element-title, .ge-content")?k(n):n=n.add(e)}),k(n)}),i.find(".row").each(function(){var e=t(this);if(!e.find("> .ge-tools-drawer").length){var n=e.attr("data-title")?e.attr("data-title"):"No title",a=(t('<div class="ge-element-title" contenteditable="true">'+n+"</div>").prependTo(e),t('<div class="ge-tools-drawer" />').prependTo(e)),o=e.attr("data-type")?e.attr("data-type"):"basic",i=t('<select class="template-type btn btn-xs btn-secondary dropdown-toggle"></select>').prependTo(a);c.template_types.forEach(function(e){i.append(t("<option></option>").attr("value",e.id).text(e.label)),o==e.id&&i.val(o)}),i.hide();var r=y(e,c.row_classes).appendTo(a);r.hide(),g(a,"Move","ge-move","glyphicon-move",null,!0),c.row_tools.forEach(function(t){g(a,t.title||"",t.className||"",t.iconClass||"glyphicon-wrench",t.on,null)}),g(a,"Remove row","","glyphicon-trash",function(){e.slideUp(function(){e.remove()})},!0),g(a,"Add column","ge-add-column","glyphicon-plus-sign",function(){e.append(C(12)),f()},!0)}}),t(".row .ge-element-title").change(function(){t(this).parent().attr("data-id",j(t(this).text())),t(this).parent().attr("data-title",t(this).text())}),a=0,i.find(".column").each(function(){a++;var e=t(this);if(!e.find("> .ge-tools-drawer").length){var n=e.attr("data-title")?e.attr("data-title"):"No title",o=(t('<div class="ge-element-title" contenteditable="true">'+n+"</div>").prependTo(e),e.attr("data-type")?e.attr("data-type"):""),i=t('<div class="ge-tools-drawer" />').prependTo(e),r=t('<select class="content-type btn btn-xs btn-secondary dropdown-toggle"></select>').prependTo(i);c.content_types.forEach(function(e){r.append(t("<option></option>").attr("value",e.id).text(e.label)),o==e.id&&r.val(o)}),r.hide();var l=y(e,c.col_classes).appendTo(i);g(i,"Move","ge-move","glyphicon-move",null,!0),g(i,"Make column narrower\n(hold shift for min)","ge-decrease-col-width","glyphicon-minus",function(t){var n=c.valid_col_sizes,a=d[p],o=n.indexOf(b(e,a)),i=n[S(o-1,0,n.length-1)];t.shiftKey&&(i=n[0]),_(e,a,Math.max(i,1))},!0),g(i,"Make column wider\n(hold shift for max)","ge-increase-col-width","glyphicon-plus",function(t){var n=c.valid_col_sizes,a=d[p],o=n.indexOf(b(e,a)),i=S(o+1,0,n.length-1),r=n[i];t.shiftKey&&(r=n[n.length-1]),_(e,a,Math.min(r,u))},!0),c.col_tools.forEach(function(t){g(i,t.title||"",t.className||"",t.iconClass||"glyphicon-wrench",t.on,!0)}),g(i,"Remove col","","glyphicon-trash",function(){e.animate({opacity:"hide",width:"hide",height:"hide"},400,function(){e.remove()})},!0),l.hide()}}),t(".row .template-type").change(function(){t(this).parent().parent().attr("data-type",t(this).val())}),t(".column > .ge-element-title").change(function(){t(this).parent().attr("data-id",j(t(this).text())),t(this).parent().attr("data-title",t(this).text())}),t(".column .content-type").change(function(){t(this).parent().parent().attr("data-type",t(this).val())}),function(){i.find(".row").sortable({items:"> .column",connectWith:".ge-canvas .row",handle:".ge-tools-drawer .ge-move",start:t,helper:"clone"}),i.add(i.find(".column")).sortable({items:"> .row, > .ge-content",connectsWith:".ge-canvas, .ge-canvas .column",handle:".ge-tools-drawer .ge-move",start:t,helper:"clone"});function t(t,e){e.placeholder.css({height:e.item.outerHeight()})}}(),t("body").on("focus","[contenteditable]",function(){var e=t(this);return e.data("before",e.html()),e}).on("blur keyup paste input","[contenteditable]",function(){var e=t(this);return e.data("before")!==e.html()&&(e.data("before",e.html()),e.trigger("change")),e}),I(p)}function v(){i.removeClass("ge-editing");i.find(".ge-content").each(function(){var e=t(this);E(e.data("ge-content-type")).deinit(c,e)});i.find(".ge-tools-drawer").remove(),i.add(i.find(".column")).add(i.find(".row")).sortable("destroy"),i.find(".column .ge-element-title").remove(),T()}function g(e,n,a,o,i,r){var l=t('<a title="'+n+'" class="'+a+'"><span class="glyphicon '+o+'"></span></a>').appendTo(e);"function"==typeof i&&l.on("click",i),"object"==typeof i&&t.each(i,function(t,e){l.on(t,e)}),r&&l.hide()}function y(e,n){var a=t('<div class="ge-details" />');t('<input class="ge-id" />').attr("placeholder","title").val(e.attr("data-title")).attr("data-id","no-id").attr("data-title","Set a unique title").appendTo(a).change(function(){e.attr("data-id",j(this.value)),e.attr("data-title",this.value);var t=e.find(".ge-element-title").first();t&&t.text(this.value),e.find(".ge-details").hide()});var o=t('<div class="btn-group" />').appendTo(a);return n.forEach(function(n){var a=t('<a class="btn btn-xs btn-default" />').html(n.label).attr("title",n.title?n.title:'Toggle "'+n.label+'" styling').toggleClass("active btn-primary",e.hasClass(n.cssClass)).on("click",function(){a.toggleClass("active btn-primary"),e.toggleClass(n.cssClass,a.hasClass("active"))}).appendTo(o)}),a}function b(t,e){for(var n=w(t),a=0;a<n.length;a++)if(n[a].colClass==e)return n[a].size;return n.length?n[0].size:null}function w(t){var e=[];return d.forEach(function(n){var a=new RegExp(n+"(\\d+)","i");a.test(t.attr("class"))&&e.push({colClass:n,size:parseInt(a.exec(t.attr("class"))[1])})}),e}function _(t,e,n){var a=new RegExp("("+e+"(\\d+))","i").exec(t.attr("class"));a&&parseInt(a[2])!==n?t.switchClass(a[1],e+n,50):t.addClass(e+n)}function C(e,n,o){a++,void 0==o&&(o=t.grep(c.content_types,function(t){return t.id==c.default_content_type_id}).label),void 0==n&&(n=c.default_content_type_id);var i=n+"-"+a;return t("<div/>").addClass(d.map(function(t){return t+e}).join(" ")).addClass("content-"+n).attr("id",i).attr("data-id",i).attr("data-title",o).attr("data-type",n).append(x().html(E(c.editor_types[0]).initialContent))}function T(e){c.custom_filter.length&&t.each(c.custom_filter,function(t,n){"string"==typeof n&&(n=window[n]),n(i,e)})}function k(e){if(e.length){var n=x().insertAfter(e.last());e.appendTo(n),e=t()}}function x(){return t("<div/>").addClass("ge-content ge-content-type-"+c.editor_types[0]).attr("data-ge-content-type",c.editor_types[0])}function I(t){p=t;["ge-layout-desktop","ge-layout-tablet","ge-layout-phone"].forEach(function(e,n){i.toggleClass(e,n==t)})}function E(e){return t.fn.gridEditor.RTEs[e]}function S(t,e,n){return Math.min(n,Math.max(e,t))}o.data("grideditor",{init:f,deinit:v});function j(t){return t.toLowerCase().split(" ").join("-")}}),this)},t.fn.gridEditor.RTEs={}}(jQuery),function(t){saveTemplate=function(e,n,a,o){var i={title:n,content:{},link:o},r=0,l=0;return t(a).filter(".row").each(function(){var e={},n=t(this).attr("data-title")?t(this).attr("data-title"):"",a=t(this).attr("data-type")?t(this).attr("data-type"):"",o=t(this).attr("data-id")?t(this).attr("data-id"):slugify(n);r++,t(this).find(".column").each(function(){var n=t(this).attr("data-id"),a=t(this).attr("data-title")?t(this).attr("data-title"):"",o=t(this).attr("data-type")?t(this).attr("data-type"):"",i=t.grep(this.className.split(" "),function(t,e){return 0===t.indexOf("col-")}).join(" ");l++,e[n]={title:a,type:o,class:i,sort:l}}),i.content[o]={title:n,type:a,elements:e,sort:r}}),setTemplate(e,i)},resetSampleTemplate=function(){return t.getJSON("sample-templates.json",function(t){console.log("Template reset completed"),setTemplates(t)})},resetSampleContent=function(){return t.getJSON("sample-products.json",function(t){console.log("Content reset completed"),setContent(t,!1,!0)})},saveContent=function(t,e){return getContent().then(function(n){var a=parseContent(t,e),o=getProductId(),i=t.attr("data-template-id");n[o]||(n[o]={}),n[o].content=a,n[o].type=i,setContent(n,e.isPreview)})},parseContent=function(e,n){var a={},o=(e.html(),n&&n.sectionDivider?n.sectionDivider:".row"),i=n&&n.elementDivider?n.elementDivider:'[class^="col-"]',r=n&&n.subElement?n.subElement:null,l=n&&n.contentFormat?n.contentFormat:"object";return e.find(o).each(function(){var e={};t(this).find(i).each(function(){t(this).attr("data-type")&&t(this).attr("data-type");if(r)var n=t(this).find(r);else n=t(this);n.each(function(){if(t(this).attr("data-id")){0;var n=t(this).attr("data-id"),a=t(this).attr("data-type"),o="object"==l?t(this).val():t(this).html(),i="";if("object"==typeof o?i=JSON.stringify(o):(o=o.replace(/\r?\n|\r/g,"").trim(),i=convertHtmlToMarkdown(o)),"quote"==a){var r="object"==l?t(this).val():t(this).html(),s=t(this).find("#annotatie-content").val();s||(s=r),o="<blockquote>"+s+"</blockquote>";var c=t(this).find("#annotatie-person").val();c&&(o+="<person>"+c+"</person>"),i=convertHtmlToMarkdown(o)}else"list"==a&&"*"==i.trim()&&(i="");e[n]=i}})}),a[this.id]={elements:e}}),a},loadTemplate=function(e,n,a,o,i,r){return n&&setTemplateId(n),getTemplate(getTemplateId()).then(function(n){var l=[];return t.each(n.data().content,function(e,n){var a=[];t.each(n.elements,function(t,e){e.id=t,a.push(e)}),a.sort(function(t,e){return t.sort&&e.sort?t.sort.toString().localeCompare(e.sort.toString()):0}),n.id=e,n.elements=a,l.push(n)}),l.sort(function(t,e){return t.sort&&e.sort?t.sort.toString().localeCompare(e.sort.toString()):0}),t(e).html(""),t(e).attr("data-template-id",n.id),t(e).attr("data-template-title",n.data().title),t(e).attr("data-template-link",n.data().link),t.each(l,function(n,l){if(!a||a==l.id){l.type||(l.type="basic");var s=o?t(o[l.type]).clone():t('<div class="row"></div>');s.attr("id",l.id),s.attr("data-id",l.id),s.attr("data-title",l.title),s.attr("data-type",l.type),o&&t(s).find("[data-title-element='true']").html(l.title),t.each(l.elements,function(e,n){var a=t(i||"<div></div>");if(a.attr("id",n.id),a.attr("data-id",n.id),a.attr("data-title",n.title),a.attr("data-type",n.type),a.addClass(n.class),a.addClass("column"),a.addClass("element-"+e),a.addClass("content-"+n.type),i){a.append(i).find("[data-title-element='true']").html(n.title)}else a.append("<span></span>");r?s.find(r).append(a):s.append(a)}),t(e).append(s)}}),n})},loadTemplates=function(e){return getTemplates().then(function(n){var a=[],o=t(e);o.html(""),o.append("<thead><tr><th>Naam</th></tr></thead>"),o.append("<tbody></tbody>"),t.each(n,function(t,e){e.id=t,e.sort=e.parent?e.parent+"-"+t:t,a.push(e)}),a.sort(function(t,e){return t.sort.localeCompare(e.sort)}),t.each(a,function(t,e){var n=e.parent?"child":"";o.append('<tr><td><a href="/template.html?template='+e.id+'" class="'+n+'">'+e.title+"</a></td></tr>")})})},loadTemplateInContentEditor=function(e,n){return getTemplate(getTemplateId()).then(function(a){e.html(""),e.attr("data-template-id",getTemplateId());var o=[];return t.each(a.data().content,function(e,n){var a=[];t.each(n.elements,function(t,e){e.id=t,a.push(e)}),a.sort(function(t,e){return t.sort&&e.sort?t.sort.toString().localeCompare(e.sort.toString()):0}),n.id=e,n.elements=a,o.push(n)}),o.sort(function(t,e){return t.sort&&e.sort?t.sort.toString().localeCompare(e.sort.toString()):0}),t.each(o,function(a,o){var i=n.clone(),r=t(i).find(".panel-title")[0],l=t(i).find(".panel-body")[0],s="";i.attr("id",o.id),i.addClass("section"),r.innerHTML=o.title,t.each(o.elements,function(e,n){t("#"+n.id)?s+=createElement(n.id,n):console.log(n.id+" not found")}),l.innerHTML=s,e.append(i)}),a})},loadContentItems=function(e){return getTemplates().then(function(n){return getContent().then(function(a){var o=[],i=t(e);i.html(""),i.append("<thead><tr><th>Naam</th><th>Type</th></tr></thead>"),i.append("<tbody></tbody>"),t.each(a,function(t,e){"empty"!=t.substring(0,5)&&(e.id=t,o.push(e))}),o.sort(function(t,e){return t.title.localeCompare(e.title)}),t.each(o,function(t,e){var a=n[e.type]?n[e.type].title:"Geen";i.append('<tr><td><a href="/content.html?content='+e.id+'">'+e.title+"</a></td><td>"+a+"</td></tr>")})})})},loadContent=function(e,n,a,o,i){return getContent("preview"==i).then(function(r){var l=r[e];if(l){var s=setTemplateId(l.type);return getTemplate(s).then(function(s){return void 0==o&&(o=""),t(n).attr("data-content-title",l.title),t.each(s.data().content,function(e,r){t.each(r.elements,function(e,r){var c=t(a&&null!=a?n+' [data-id="'+e+'"] '+a:n+' [data-id="'+e+'"]');if(c[0]){var d=function t(e,n){for(var a in e)if(e.hasOwnProperty(a)){if(a==n)return e[a];if("object"==typeof e[a]){var o=t(e[a],n);if(o)return o}}}(l,e);switch(d||(d=o),r.type){case"quote":if("live"!=i&&"preview"!=i){h=convertMarkdownToHtml(d);var p=t(h).filter("blockquote").find("p").html();p||(p=d),c.find("#"+e+"-content").val(p),c.find("#"+e+"-content").html(p);var u=t(h).find("person").html();c.find("#"+e+"-person").val(u),c.find("#"+e+"-person").html(u);break}var h=convertMarkdownToHtml(d);c.val(convertMarkdownToHtml(d)),c.html(convertMarkdownToHtml(d));case"text":case"rich-text":c.val(convertMarkdownToHtml(d)),c.html(convertMarkdownToHtml(d));break;case"image":case"imagelist":populateImageList(c,s.id,d);break;case"list":if(""==(h=convertMarkdownToHtml(d))&&"preview"!=i&&"live"!=i&&(h="<ul><li></li></ul>"),"live"==i&&("pluspunten"==e||"minpunten"==e)){t("body").append('<div id="temp-html" style="display: none"></div>');var m=t("#temp-html").append(h);t(m).find("ul").addClass("review-pros-and-cons__list review-pros-and-cons__list--pros"),"pluspunten"==e?t(m).find("li").addClass("review-pros-and-cons__attribute review-pros-and-cons__attribute--pro"):t(m).find("li").addClass("review-pros-and-cons__attribute review-pros-and-cons__attribute--con"),h=m.html(),m.remove()}c.val(h),c.html(h);break;default:"template-"==r.type.substring(0,9)?c.val(d):(c.val(d),c.html(d))}}})}),r[e]})}})},getContent=function(t){var e={};return t?new Promise(function(t,e){t(JSON.parse(localStorage.getItem("previewProducts")))}):db.collection("products").get().then(function(t){return t.forEach(function(t){e[t.id]=t.data()}),e})},setContent=function(e,n,a){var o=JSON.stringify(e);if(!n){var i=db.batch();return t.each(e,function(t,e){a&&(e=convertPropertiesToMarkdown(e));var n=db.collection("products").doc(t);i.set(n,e)}),i.commit().then(function(){console.log("Content successfully updated!")}).catch(function(t){console.error("Error updating document: ",t)})}localStorage.setItem("previewProducts",o)},setShopMainTemplate=function(){t("#product_title").append('<a id="edit-page-template" href="http://localhost:8000/template.html?template=pdp" class="review__btn-write-review" style="float: right" title="Pas template aan"><i class="fa fa-th"></i> Pas pagina-template aan</a>')},setShopElementContent=function(e,n,a){getURLParameter("content")&&(a=setProductId(getURLParameter("content")));var o=!(!getURLParameter("preview")||"undefined"==getURLParameter("preview")),i=t(e);t(e+"  .description");i.html('<div><span id="loader" class="loader glyphicon glyphicon-refresh glyphicon-refresh-animate"></span></div>');var r=t('<div class="content-controls slot slot--seperated"></div>');i.before(r),r.append('<a href="http://localhost:8000/template.html?template='+n+'" class="btn buy-block__btn-wishlist btn--wishlist btn--quaternary btn--lg js_add_to_wishlist_link js_preventable_buy_action" title="Pas template aan"><i class="fa fa-th"></i> Pas template aan</a>'),r.append('<a href="http://localhost:8000/content.html?content='+a+'" class="btn buy-block__btn-wishlist btn--wishlist btn--quaternary btn--lg js_add_to_wishlist_link js_preventable_buy_action" title="Pas content aan"><i class="fa fa-edit"></i> Pas content aan</a>');loadTemplate(i,n,null,{basic:'<div class="slot slot--description slot--seperated">\n      <h2 data-title-element="true"></h2>\n      <div class="description row">\n      </div>\n    </div>',collapsible:'<div class="slot slot--description slot--seperated slot--seperated--has-more-content js_slot-description">\n      <h2 data-title-element="true"></h2>\n      <div class="js_show-more-description show-more">\n        <div class="js_show-more-holder show-more-holder show-more--l product-tracklists-show-more--animate">\n          <div class="description row">\n          </div>\n        </div>\n\n        <div class="show-more__fade  js_show-more-button">\n          <a href="#" class="show-more__button" data-test="showmore">\n              <span class="[ show-more__text  show-more__text-more ]  js_link-more" title="Toon meer" data-test="showmore-text-more">Toon meer</span>\n              <span class="[ show-more__text  show-more__text-less ]  js_link-less" title="Toon minder" data-test="showmore-text-less">Toon minder</span>\n            </a>\n        </div>\n      </div>\n    </div>'},'<span><h3 data-title-element="true"></h3></span>'," .description").then(function(n){loadContent(a,e,"span",null,o?"preview":"live").then(function(n){t(e+" .show-more__button").click(function(e){var n=t(this).parent().parent().parent();n.hasClass("active")?(n.removeClass("active"),e.preventDefault(),n.find(".show-more-holder").height("210px"),n.find(".js_link-less").hide(),n.find(".js_link-more").show()):(n.addClass("active"),e.preventDefault(),n.find(".show-more-holder").height(n.find(".description").height()),n.find(".js_link-less").show(),n.find(".js_link-more").hide()),t("html, body").animate({scrollTop:t(n).offset().top},500)})})})},getTemplate=function(t,e){if(e)return localStorage.getItem("previewTemplate");var n=this;return db.collection("templates").doc(t).get().then(function(t){if(t.exists)return t;console.log("No such template: "+n.id)}).catch(function(t){console.log("Error getting template:",t)})},getTemplates=function(){var t={};return db.collection("templates").get().then(function(e){return e.forEach(function(e){t[e.id]=e.data()}),t})},setTemplate=function(t,e,n){var a={};a[t]=e;var o=JSON.stringify(a);if(!n){return db.collection("templates").doc(t).set(e).then(function(){return console.log("Template successfully updated!"),e}).catch(function(t){console.error("Error updating document: ",t)})}localStorage.setItem("previewTemplate",o)},setTemplates=function(e){JSON.stringify(e);var n=db.batch();return t.each(e,function(t,e){var a=db.collection("templates").doc(t);n.set(a,e)}),n.commit().then(function(){console.log("Templates successfully updated!")}).catch(function(t){console.error("Error updating document: ",t)})},getProductId=function(){var t=localStorage.getItem("selectedProductId");return t&&"undefined"!=t||(t=setProductId()),t},setProductId=function(t){return t||(t="empty"),localStorage.setItem("selectedProductId",t),localStorage.getItem("selectedProductId")},getTemplateId=function(){var t=localStorage.getItem("selectedTemplateId");return t&&"undefined"!=t||(t=setTemplateId()),t},setTemplateId=function(t){return t||(t="product-description"),localStorage.setItem("selectedTemplateId",t),localStorage.getItem("selectedTemplateId")},getContentName=function(){var t=getProductId();return getContent().then(function(e){return e[t].title})},getTemplateItems=function(){return getTemplates().then(function(e){var n=[];return t.each(e,function(t,e){n.push({id:t,title:e.title,parent:e.parent?e.parent:null})}),n.sort(function(t,e){return t.title.localeCompare(e.title)}),n})},getContentItems=function(e){return void 0==e&&(e=!1),getContent().then(function(n){var a=[];return t.each(n,function(t,n){(e||"empty"!=t.substring(0,5))&&a.push({id:t,type:n.type,title:n.title})}),a.sort(function(t,e){return t.title.localeCompare(e.title)}),a})},populateTemplateItems=function(){return getTemplateItems().then(function(e){e.forEach(function(e){t("#template-items").append(t("<option></option>").attr("value",e.id).text(e.title))}),t("#template-items").val(getTemplateId())})},addTemplateToSectionDropdowns=function(){return getTemplateItems().then(function(e){if(e.length>0){var n=t("#grid-editor").attr("data-template-id"),a=t(".content-type.dropdown-toggle");a.append(t("<option disabled>___________________________</option>")),e.forEach(function(e){var o=e.id==n?' disabled="true"':"",i=e.parent?"- "+e.title:e.title;a.append(t("<option"+o+"></option>").attr("value","template-"+e.id).text(i))}),t(".column .content-type.dropdown-toggle").each(function(){t(this).val(t(this).parent().parent().attr("data-type"))})}})},populateContentItems=function(e){return getContentItems(e).then(function(e){t("#content-items").html("");var n=getTemplateId();e.filter(function(t){return t.type===n||"all"===t.type}).forEach(function(e){t("#content-items").append(t("<option></option>").attr("value",e.id).text(e.title)),t("#preview-content ul.dropdown-menu").append(t('<li><a data-width="auto" title="'+e.id+'"><span>'+e.title+"</span></li>")),e.id===getProductId()&&t("#preview-content-select span").html(e.title)}),t("#content-items").val(getProductId())})},createElement=function(t,e){var n="<h4>"+e.title+"</h4>",a='<div class="form-group">';switch("template-"==e.type.substring(0,9)?"template":e.type){case"text":a+=n,a+='<textarea class="form-control text" data-id="'+t+'" data-type="'+e.type+'"></textarea>';break;case"rich-text":a+=n,a+='<textarea class="form-control rich-text" data-id="'+t+'"data-type="'+e.type+'"></textarea>';break;case"list":a+=n,a+='<textarea class="form-control list" data-id="'+t+'" data-type="'+e.type+'"></textarea>';break;case"quote":a+='<div class="quote" data-id="'+t+'" data-type="'+e.type+'">',a+='<div class="row">',a+='<div class="col-md-12"><h4>'+e.title+"</h4></div>",a+="</div>",a+='<div class="row">',a+='<div class="col-md-9 form-group">',a+='<label for="'+e.id+'-content">Quote</label>',a+='<input id="'+e.id+'-content" class="form-control">',a+="</div>",a+='<div class="col-md-3 form-group">',a+='<label for="'+e.id+'-person">Gezegd door</label>',a+='<input id="'+e.id+'-person" class="form-control">',a+="</div>";break;case"image":a+=n,a+='<select data-id="'+t+'" data-type="'+e.type+'"></select>';break;case"imagelist":a+=n,a+='<select data-id="'+t+'" data-type="'+e.type+'" multiple="multiple"></select>';break;case"template":var o=e.type.substring(9);a+=n,a+='<select data-id="'+t+'" data-type="'+e.type+'" data-template="'+o+'"></select>',populateContentDropdown(t,o);break;default:a+=n,a+='<input class="form-control" data-id="'+t+'" data-type="'+e.type+'">'}return a+="</div>"},populateContentDropdown=function(e,n){return getContentItems().then(function(a){a.filter(function(t){return t.type===n||"all"===t.type}).forEach(function(n){t('select[data-id="'+e+'"]').append(t("<option></option>").attr("value",n.id).text(n.title))})})},populateImageList=function(e,n,a){return t.getJSON("http://localhost:8888/images/"+n,function(o){o.forEach(function(a){e.append(t("<option></option>").attr("data-img-src","/sample_content/images/"+n+"/"+a).attr("value",a).text(a))});var i=function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(a)?JSON.parse(a):a;i&&e.val(i),t(e).imagepicker()})},getContentTypeFromClass=function(e){var n=t(e).attr("class").split(" ").filter(function(t){return"string"==typeof t&&t.indexOf("content-")>-1}).map(function(t){return t.substring(8)})[0];return void 0==n&&(n="text"),n};wrapWithParagraph=function(e,n){var a=t(e);return t.each(n,function(n,o){a=t(e+" "+o).wrapInner("<p></p>")}),a};convertHtmlToMarkdown=function(t){return new reMarked({link_list:!1,h1_setext:!0,h2_setext:!0,h_atx_suf:!1,gfm_code:"```",trim_code:!0,li_bullet:"*",hr_char:"-",indnt_str:"    ",bold_char:"*",emph_char:"_",gfm_del:!0,gfm_tbls:!0,tbl_edges:!1,hash_lnks:!1,br_only:!1,col_pre:"col ",nbsp_spc:!1,span_tags:!0,div_tags:!0,unsup_tags:{ignore:"script style noscript",inline:"span sup sub i u b center big",block2:"div form fieldset dl header footer address article aside figure hgroup section",block1c:"dt dd caption legend figcaption output",block2c:"canvas audio video iframe"},tag_remap:{i:"em",b:"strong"}}).render(t)},convertMarkdownToHtml=function(t){return(new showdown.Converter).makeHtml(t)},convertPropertiesToMarkdown=function(e){return t.each(e.content,function(n,a){t.each(a,function(t,a){e.content[n][t]=convertHtmlToMarkdown(a)})}),e},getURLParameter=function(t){for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var a=e[n].split("=");if(a[0]==t)return a[1]}},setURLParameter=function(t,e){var n=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+t+"="+e;window.history.pushState({path:n},"",n)},slugify=function(t){return t.toLowerCase().split(" ").join("-")}}(jQuery);var firebaseConfig={apiKey:"AIzaSyC1oK8OilCE_f6tBdsKkCSEScjnhNWVelU",authDomain:"retail-tooling-cms.firebaseapp.com",databaseURL:"https://retail-tooling-cms.firebaseio.com",projectId:"retail-tooling-cms",storageBucket:"retail-tooling-cms.appspot.com",messagingSenderId:"73299715568"};firebase.initializeApp(firebaseConfig);var db=firebase.firestore();$.fn.gridEditor.RTEs.ckeditor={init:function(t,e){window.CKEDITOR||console.error("CKEditor not available! Make sure you loaded the ckeditor and jquery adapter js files.");var n=this;e.each(function(){var e=$(this);if(!e.hasClass("active")){e.html()==n.initialContent&&e.html("&nbsp;"),e.addClass("active").attr("contenteditable","true");var a=$.extend({},t.ckeditor&&t.ckeditor.config?t.ckeditor.config:{},{on:{instanceReady:function(e){var n;try{n=t.ckeditor.config.on.instanceReady}catch(t){}n&&n.call(this,e),o.focus()}}}),o=CKEDITOR.inline(e.get(0),a)}})},deinit:function(t,e){e.filter(".active").each(function(){var t=$(this);$.each(CKEDITOR.instances,function(t,e){e.destroy()}),t.removeClass("active cke_focus").removeAttr("id").removeAttr("style").removeAttr("spellcheck").removeAttr("contenteditable")})},initialContent:"<p>Lorem initius... </p>"},$.fn.gridEditor.RTEs.summernote={init:function(t,e){jQuery().summernote||console.error("Summernote not available! Make sure you loaded the Summernote js file.");var n=this;e.each(function(){var e=$(this);if(!e.hasClass("active")){e.html()==n.initialContent&&e.html(""),e.addClass("active");var a=$.extend(!0,{},t.summernote&&t.summernote.config?t.summernote.config:{},{tabsize:2,airMode:!0,callbacks:{onInit:function(){var n;try{n=t.summernote.config.callbacks.onInit}catch(t){}n&&n.call(this),e.summernote("focus")}}});e.summernote(a)}})},deinit:function(t,e){e.filter(".active").each(function(){var t=$(this);t.summernote("destroy"),t.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>Lorem ipsum dolores</p>"},$.fn.gridEditor.RTEs.tinymce={init:function(t,e){window.tinymce||console.error("tinyMCE not available! Make sure you loaded the tinyMCE js file."),e.tinymce||console.error("tinyMCE jquery integration not available! Make sure you loaded the jquery integration plugin.");var n=this;e.each(function(){var e=$(this);if(!e.hasClass("active")){e.html()==n.initialContent&&e.html(""),e.addClass("active");var a=$.extend({},t.tinymce&&t.tinymce.config?t.tinymce.config:{},{inline:!0,oninit:function(e){$("#"+e.settings.id).focus();var n;try{n=t.tinymce.config.oninit}catch(t){}n&&n.call(this)}});e.tinymce(a)}})},deinit:function(t,e){e.filter(".active").each(function(){var t=$(this),e=t.tinymce();e&&e.remove(),t.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>No content</p>"};
//# sourceMappingURL=jquery.grideditor.min.js.map
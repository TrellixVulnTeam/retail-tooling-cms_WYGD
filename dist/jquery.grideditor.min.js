!function(a){a.fn.gridEditor=function(b){var c=this,d=c.data("grideditor"),e=0;if("getHtml"==arguments[0]){if(d){d.deinit();var f=c.html();return d.init(),f}return c.html()}return"deinit"==arguments[0]&&d?(d.deinit(),a(".ge-mainControls").remove(),void a(".ge-html-output").remove()):(c.each(function(c,d){function f(){E=d.addClass("ge-canvas"),void 0!==H&&H.length||(H=a('<textarea class="ge-html-output"/>').insertBefore(E)),F=a('<div class="ge-mainControls" />').insertBefore(H);var b=a('<div class="ge-wrapper ge-top" />').appendTo(F),c=a('<div id="preview-controls" class="form-inline"></div>').appendTo(b),e=a('<div class="form-group"></div>').appendTo(c),f=a('<div class="dropdown ge-layout-mode"><label for="layout-type-select">Preview size: </label><button id="layout-type-select" type="button" class="btn btn-md btn-secondary dropdown-toggle" data-toggle="dropdown"><span>Desktop</span></button><ul class="dropdown-menu" role="menu"><li><a data-width="auto" title="Desktop"><span>Desktop</span></a></li><li><a title="Tablet"><span>Tablet</span></li><li><a title="Phone"><span>Phone</span></a></li></ul></div>').on("click","a",function(){var b=a(this);A(b.closest("li").index());var c=f.find("button");c.find("span").remove(),c.append(b.find("span").clone())}).appendTo(e),i=a('<div id="preview-content" class="dropdown ge-content-mode"><label for="preview-content-select">Preview content: </label><button id="preview-content-select" type="button" class="btn btn-md btn-secondary dropdown-toggle" data-toggle="dropdown"><span>George Orwell - 1984</span></button><ul class="dropdown-menu" role="menu"></ul></div>').on("click","a",function(){var b=a(this),c=i.find("button");c.find("span").remove(),c.append(b.find("span").clone())}).appendTo(e);G=a('<div class="ge-addRowGroup btn-group" />').appendTo(b),a.each(I.new_row_layouts,function(b,c){var d=a('<a class="btn btn-md btn-primary" />').attr("title","Add row "+c.title).on("click",function(){var a=u(c.title).appendTo(E);c.cols.forEach(function(b){v(b.count,b.type).appendTo(a)}),g()}).appendTo(G);d.append('<span class="glyphicon glyphicon-plus-sign"/>');var e=c.title,f='<div class="row ge-row-icon">';c.cols&&c.cols.forEach(function(a){f+='<div class="column col-xs-'+a+'"/>'}),f+="</div>",d.append(e)});var j=(a('<div class="btn-group pull-right"/>').appendTo(b),a('<button title="Edit Source Code" type="button" class="btn btn-md btn-primary gm-edit-mode"><span class="glyphicon glyphicon-chevron-left"></span><span class="glyphicon glyphicon-chevron-right"></span></button>').on("click",function(){j.hasClass("active")?(E.empty().html(H.val()).show(),g(),H.hide()):(h(),H.height(.8*a(window).height()).val(E.html()).show(),E.hide()),j.toggleClass("active btn-danger")})),k=a('<button title="Preview" type="button" class="btn btn-md btn-primary gm-preview"><span class="glyphicon glyphicon-eye-open"></span></button>').on("mouseenter",function(){E.removeClass("ge-editing")}).on("click",function(){k.toggleClass("active btn-danger").trigger("mouseleave")}).on("mouseleave",function(){k.hasClass("active")||E.addClass("ge-editing")});E.on("mouseenter",".row > .ge-tools-drawer",function(b){a(this).parent().find("> .ge-tools-drawer a").show()}),E.on("mouseleave",".row > .ge-tools-drawer",function(b){a(this).parent().find("> .ge-tools-drawer a").hide(),a(this).parent().find(".content-type").hide(),a(this).parent().find(".ge-details").hide()}),E.on("mouseenter",".column",function(b){a(this).find("> .ge-tools-drawer > a").show(),a(this).find(".content-type").show()}),E.on("mouseleave",".column",function(b){a(this).find("> .ge-tools-drawer > a").hide(),a(this).find(".content-type").hide(),a(this).find(".ge-details").hide()})}function g(){w(!0),E.addClass("ge-editing"),m(),x(),i(),j(),q(),s(),A(K)}function h(){E.removeClass("ge-editing");E.find(".ge-content").each(function(){var b=a(this);B(b.data("ge-content-type")).deinit(I,b)});E.find(".ge-tools-drawer").remove(),r(),t(),w()}function i(){E.find(".row").each(function(){var b=a(this);if(!b.find("> .ge-tools-drawer").length){var c=b.attr("data-title")?b.attr("data-title"):"No title",d=(a('<div class="ge-element-title" contenteditable="true">'+c+"</div>").prependTo(b),a('<div class="ge-tools-drawer" />').prependTo(b));l(b,I.row_classes).appendTo(d).hide(),k(d,"Move","ge-move","glyphicon-move",null,!0),I.row_tools.forEach(function(a){k(d,a.title||"",a.className||"",a.iconClass||"glyphicon-wrench",a.on,null,!0)}),k(d,"Remove row","","glyphicon-trash",function(){b.slideUp(function(){b.remove()})},!0),k(d,"Add column","ge-add-column","glyphicon-plus-sign",function(){b.append(v(12)),g()},!0)}}),a(".row .ge-element-title").change(function(){a(this).parent().attr("data-id",D(a(this).text())),a(this).parent().attr("data-title",a(this).text())})}function j(){e=0,E.find(".column").each(function(){e++;var b=a(this);if(!b.find("> .ge-tools-drawer").length){var c=b.attr("data-title")?b.attr("data-title"):"No title",d=(a('<div class="ge-element-title" contenteditable="true">'+c+"</div>").prependTo(b),b.attr("data-type")?b.attr("data-type"):""),f=a('<div class="ge-tools-drawer" />').prependTo(b),g=a('<select class="content-type btn btn-xs btn-secondary dropdown-toggle"></select>').prependTo(f);I.content_types.forEach(function(b){g.append(a("<option></option>").attr("value",b.id).text(b.label));d==b.id&&g.val(d)}),g.hide();var h=l(b,I.col_classes).appendTo(f);k(f,"Move","ge-move","glyphicon-move",null,!0),k(f,"Make column narrower\n(hold shift for min)","ge-decrease-col-width","glyphicon-minus",function(a){var c=I.valid_col_sizes,d=J[K],e=c.indexOf(n(b,d)),f=c[C(e-1,0,c.length-1)];a.shiftKey&&(f=c[0]),p(b,d,Math.max(f,1))},!0),k(f,"Make column wider\n(hold shift for max)","ge-increase-col-width","glyphicon-plus",function(a){var c=I.valid_col_sizes,d=J[K],e=c.indexOf(n(b,d)),f=C(e+1,0,c.length-1),g=c[f];a.shiftKey&&(g=c[c.length-1]),p(b,d,Math.min(g,L))},!0),I.col_tools.forEach(function(a){k(f,a.title||"",a.className||"",a.iconClass||"glyphicon-wrench",a.on,!0)}),k(f,"Remove col","","glyphicon-trash",function(){b.animate({opacity:"hide",width:"hide",height:"hide"},400,function(){b.remove()})},!0),h.hide()}}),a(".column > .ge-element-title").change(function(){a(this).parent().attr("data-id",D(a(this).text())),a(this).parent().attr("data-title",a(this).text())}),a(".column .content-type").change(function(){a(this).parent().parent().attr("data-type",a(this).val())})}function k(b,c,d,e,f,g){var h=a('<a title="'+c+'" class="'+d+'"><span class="glyphicon '+e+'"></span></a>').appendTo(b);"function"==typeof f&&h.on("click",f),"object"==typeof f&&a.each(f,function(a,b){h.on(a,b)}),g&&h.hide()}function l(b,c){var d=a('<div class="ge-details" />');a('<input class="ge-id" />').attr("placeholder","title").val(b.attr("data-title")).attr("data-id","no-id").attr("data-title","Set a unique title").appendTo(d).change(function(){b.attr("data-id",D(this.value)),b.attr("data-title",this.value);var a=b.find(".ge-element-title").first();a&&a.text(this.value),b.find(".ge-details").hide()});var e=a('<div class="btn-group" />').appendTo(d);return c.forEach(function(c){var d=a('<a class="btn btn-xs btn-default" />').html(c.label).attr("title",c.title?c.title:'Toggle "'+c.label+'" styling').toggleClass("active btn-primary",b.hasClass(c.cssClass)).on("click",function(){d.toggleClass("active btn-primary"),b.toggleClass(c.cssClass,d.hasClass("active"))}).appendTo(e)}),d}function m(){E.find('.column, div[class*="col-"]').each(function(){var b=a(this),c=2,d=o(b);d.length&&(c=d[0].size);var e=b.attr("class");J.forEach(function(a){-1==e.indexOf(a)&&b.addClass(a+c)}),b.addClass("column")})}function n(a,b){for(var c=o(a),d=0;d<c.length;d++)if(c[d].colClass==b)return c[d].size;return c.length?c[0].size:null}function o(a){var b=[];return J.forEach(function(c){var d=new RegExp(c+"(\\d+)","i");d.test(a.attr("class"))&&b.push({colClass:c,size:parseInt(d.exec(a.attr("class"))[1])})}),b}function p(a,b,c){var d=new RegExp("("+b+"(\\d+))","i"),e=d.exec(a.attr("class"));e&&parseInt(e[2])!==c?a.switchClass(e[1],b+c,50):a.addClass(b+c)}function q(){function a(a,b){b.placeholder.css({height:b.item.outerHeight()})}E.find(".row").sortable({items:"> .column",connectWith:".ge-canvas .row",handle:".ge-tools-drawer .ge-move",start:a,helper:"clone"}),E.add(E.find(".column")).sortable({items:"> .row, > .ge-content",connectsWith:".ge-canvas, .ge-canvas .column",handle:".ge-tools-drawer .ge-move",start:a,helper:"clone"})}function r(){E.add(E.find(".column")).add(E.find(".row")).sortable("destroy")}function s(){a("body").on("focus","[contenteditable]",function(){var b=a(this);return b.data("before",b.html()),b}).on("blur keyup paste input","[contenteditable]",function(){var b=a(this);return b.data("before")!==b.html()&&(b.data("before",b.html()),b.trigger("change")),b})}function t(){E.find(".column .ge-element-title").remove()}function u(b){return a('<div class="row" data-id="'+D(b)+'" data-title="'+b+'" />')}function v(b,c,d){e++,void 0==d&&(d=a.grep(I.content_types,function(a){return a.id==I.default_content_type_id}).label),void 0==c&&(c=I.default_content_type_id);var f=c+"-"+e;return a("<div/>").addClass(J.map(function(a){return a+b}).join(" ")).addClass("content-"+c).attr("id",f).attr("data-id",f).attr("data-title",d).attr("data-type",c).append(z().html(B(I.editor_types[0]).initialContent))}function w(b){I.custom_filter.length&&a.each(I.custom_filter,function(a,c){"string"==typeof c&&(c=window[c]),c(E,b)})}function x(){E.find(".column").each(function(){var b=a(this),c=a();b.children().each(function(){var b=a(this);b.is(".row, .ge-tools-drawer, .ge-element-title, .ge-content")?y(c):c=c.add(b)}),y(c)})}function y(b){if(b.length){var c=z().insertAfter(b.last());b.appendTo(c),b=a()}}function z(){return a("<div/>").addClass("ge-content ge-content-type-"+I.editor_types[0]).attr("data-ge-content-type",I.editor_types[0])}function A(a){K=a,["ge-layout-desktop","ge-layout-tablet","ge-layout-phone"].forEach(function(b,c){E.toggleClass(b,c==a)})}function B(b){return a.fn.gridEditor.RTEs[b]}function C(a,b,c){return Math.min(c,Math.max(b,a))}function D(a){return a.toLowerCase().split(" ").join("-")}d=a(d);var E,F,G,H,I=a.extend({new_row_layouts:[[12],[6,6],[4,4,4],[3,3,3,3],[2,2,2,2,2,2],[2,8,2],[4,8],[8,4]],row_classes:[{label:"Example class",cssClass:"example-class"}],col_classes:[{label:"Example class",cssClass:"example-class"}],col_tools:[],row_tools:[],custom_filter:"",editor_types:["tinymce"],valid_col_sizes:[1,2,3,4,5,6,7,8,9,10,11,12],source_textarea:"",content_types:[{id:"text",label:"Tekst"},{id:"rich-text",label:"Opgemaakte tekst"},{id:"list",label:"Lijst"},{id:"quote",label:"Annotatie"},{id:"image",label:"Afbeelding"},{id:"image-list",label:"Meerdere afbeeldingen"},{id:"warning",label:"Waarschuwing"}],default_content_type_id:"text"},b),J=["col-md-","col-sm-","col-xs-"],K=0,L=12;if(I.source_textarea){var M=a(I.source_textarea);M.addClass("ge-html-output"),H=M,M.val()&&d.html(M.val())}if(d.children().length&&!d.find("div.row").length){var N=d.children();a('<div class="row"><div class="col-md-12"/></div>').appendTo(d).find(".col-md-12").append(N)}f(),g(),d.data("grideditor",{init:g,deinit:h})}),c)},a.fn.gridEditor.RTEs={}}(jQuery),function(a){function b(a,c){for(var d in a)if(a.hasOwnProperty(d)){if(d==c)return a[d];if("object"==typeof a[d]){var e=b(a[d],c);if(e)return e}}}saveTemplate=function(b,c,d,e){var f={title:c,content:{},link:e},g=0,h=0;return a(d).filter(".row").each(function(){var b=this,c={},d=a(b).attr("data-title")?a(b).attr("data-title"):"",e=a(b).attr("data-id")?a(b).attr("data-id"):slugify(d);g++,a(b).find(".column").each(function(){var b=this,d=a(b).attr("data-id"),e=a(b).attr("data-title")?a(b).attr("data-title"):"",f=a(b).attr("data-type")?a(b).attr("data-type"):"",g=a.grep(b.className.split(" "),function(a,b){return 0===a.indexOf("col-")}).join(" ");h++,c[d]={title:e,type:f,class:g,sort:h}}),f.content[e]={title:a(b).attr("data-title"),elements:c,sort:g}}),setTemplate(b,f)},resetSampleTemplate=function(){return a.getJSON("sample-templates.json",function(a){console.log("Template reset completed"),setTemplates(a)})},resetSampleContent=function(){return a.getJSON("sample-products.json",function(a){console.log("Content reset completed"),setContent(a,!1,!0)})},saveContent=function(a,b){return getContent().then(function(c){var d=parseContent(a,b),e=getProductId(),f=a.attr("data-template-id");c[e]||(c[e]={}),c[e].content=d,c[e].type=f,setContent(c,b.isPreview)})},parseContent=function(b,c){var d={},e=0,f=(b.html(),c&&c.sectionDivider?c.sectionDivider:".row"),g=c&&c.elementDivider?c.elementDivider:'[class^="col-"]',h=c&&c.subElement?c.subElement:null,i=c&&c.contentFormat?c.contentFormat:"object";return b.find(f).each(function(){var b=this,c={};a(b).find(g).each(function(){var b=this;a(b).attr("data-type")&&a(b).attr("data-type");if(h)var d=a(b).find(h);else var d=a(b);d.each(function(){if(a(this).attr("data-id")){e++;var b="object"==i?a(this).val():a(this).html();b=b.replace(/\r?\n|\r/g,"").trim(),console.log(b.replace(/"/g,'\\"'));var d=convertHtmlToMarkdown(b);"list"==a(this).attr("data-type")&&"*"==d.trim()&&(d=""),c[a(this).attr("data-id")]=d}})}),d[b.id]={elements:c}}),d},loadTemplate=function(b,c,d,e,f,g){return c&&setTemplateId(c),getTemplate(getTemplateId()).then(function(c){var h=[];return a.each(c.data().content,function(b,c){var d=[];a.each(c.elements,function(a,b){b.id=a,d.push(b)}),d.sort(function(a,b){return a.sort&&b.sort?a.sort.toString().localeCompare(b.sort.toString()):0}),c.id=b,c.elements=d,h.push(c)}),h.sort(function(a,b){return a.sort&&b.sort?a.sort.toString().localeCompare(b.sort.toString()):0}),a(b).html(""),a(b).attr("data-template-id",c.id),a(b).attr("data-template-title",c.data().title),a(b).attr("data-template-link",c.data().link),a.each(h,function(c,h){if(!d||d==h.id){var i=e?a(e).clone():a('<div class="row"></div>');i.attr("id",h.id),i.attr("data-id",h.id),i.attr("data-title",h.title),e&&a(i).find("[data-title-element='true']").html(h.title),a.each(h.elements,function(b,c){var d=a(f?f:"<div></div>");if(d.attr("id",c.id),d.attr("data-id",c.id),d.attr("data-title",c.title),d.attr("data-type",c.type),d.addClass(c.class),d.addClass("column"),d.addClass("element-"+b),d.addClass("content-"+c.type),f){d.append(f).find("[data-title-element='true']").html(c.title)}else d.append("<span></span>");g?i.find(g).append(d):i.append(d)}),a(b).append(i)}}),c})},loadTemplates=function(b){return getTemplates().then(function(c){var d=[],e=a(b);e.html(""),e.append("<thead><tr><th>Naam</th></tr></thead>"),e.append("<tbody></tbody>"),a.each(c,function(a,b){b.id=a,d.push(b)}),d.sort(function(a,b){return a.title.localeCompare(b.title)}),a.each(d,function(a,b){e.append('<tr><td><a href="/template.html?template='+b.id+'">'+b.title+"</a></td></tr>")})})},loadTemplateInContentEditor=function(b,c){return getTemplate(getTemplateId()).then(function(d){b.html(""),b.attr("data-template-id",getTemplateId());var e=[];return a.each(d.data().content,function(b,c){var d=[];a.each(c.elements,function(a,b){b.id=a,d.push(b)}),d.sort(function(a,b){return a.sort&&b.sort?a.sort.toString().localeCompare(b.sort.toString()):0}),c.id=b,c.elements=d,e.push(c)}),e.sort(function(a,b){return a.sort&&b.sort?a.sort.toString().localeCompare(b.sort.toString()):0}),a.each(e,function(d,e){var f=c.clone(),g=a(f).find(".panel-title")[0],h=a(f).find(".panel-body")[0],i="";f.attr("id",e.id),f.addClass("section"),g.innerHTML=e.title,a.each(e.elements,function(b,c){i+='<div class="form-group" data-id="'+c.id+'">',a("#"+c.id)?(i+='<label for="'+c.id+'">'+c.title+"</label>",i+=createElement(c.id,c)):console.log(c.id+" not found"),i+="</div>"}),h.innerHTML=i,b.append(f)}),d})},loadContentItems=function(b){return getTemplates().then(function(c){return getContent().then(function(d){var e=[],f=a(b);f.html(""),f.append("<thead><tr><th>Naam</th><th>Type</th></tr></thead>"),f.append("<tbody></tbody>"),a.each(d,function(a,b){"empty"!=a.substring(0,5)&&(b.id=a,e.push(b))}),e.sort(function(a,b){return a.title.localeCompare(b.title)}),a.each(e,function(a,b){var d=c[b.type]?c[b.type].title:"Geen";f.append('<tr><td><a href="/content.html?content='+b.id+'">'+b.title+"</a></td><td>"+d+"</td></tr>")})})})},loadContent=function(c,d,e,f,g){return getContent("preview"==g).then(function(h){var i=h[c];if(i){var j=setTemplateId(i.type);return getTemplate(j).then(function(j){return void 0==f&&(f=""),a(d).attr("data-content-title",i.title),a.each(j.data().content,function(c,h){a.each(h.elements,function(c,h){var j=a(e&&null!=e?d+" [data-id='"+c+"'] "+e:d+" #"+c);if(j[0]){var k=b(i,c);switch(k||(k=f),h.type){case"image":j.html(k);break;case"quote":case"text":case"rich-text":j.val(convertMarkdownToHtml(k)),j.html(convertMarkdownToHtml(k));break;case"list":var l=convertMarkdownToHtml(k);if(""==l&&"preview"!=g&&"live"!=g&&(l="<ul><li></li></ul>"),"live"==g&&("pluspunten"==c||"minpunten"==c)){a("body").append('<div id="temp-html" style="display: none"></div>');var m=a("#temp-html").append(l);a(m).find("ul").addClass("review-pros-and-cons__list review-pros-and-cons__list--pros"),"pluspunten"==c?a(m).find("li").addClass("review-pros-and-cons__attribute review-pros-and-cons__attribute--pro"):a(m).find("li").addClass("review-pros-and-cons__attribute review-pros-and-cons__attribute--con"),l=m.html(),m.remove()}j.val(l),j.html(l);break;default:j.html(k)}}})}),h[c]})}})},getContent=function(a){var b={};return a?new Promise(function(a,b){a(JSON.parse(localStorage.getItem("previewProducts")))}):db.collection("products").get().then(function(a){return a.forEach(function(a){b[a.id]=a.data()}),b})},setContent=function(b,c,d){var e=JSON.stringify(b);if(!c){var f=db.batch();return a.each(b,function(a,b){d&&(b=convertPropertiesToMarkdown(b));var c=db.collection("products").doc(a);f.set(c,b)}),f.commit().then(function(){console.log("Content successfully updated!")}).catch(function(a){console.error("Error updating document: ",a)})}localStorage.setItem("previewProducts",e)},getTemplate=function(a,b){if(b)return localStorage.getItem("previewTemplate");var c=this;return db.collection("templates").doc(a).get().then(function(a){if(a.exists)return a;console.log("No such template: "+c.id)}).catch(function(a){console.log("Error getting template:",a)})},getTemplates=function(){var a={};return db.collection("templates").get().then(function(b){return b.forEach(function(b){a[b.id]=b.data()}),a})},setTemplate=function(a,b,c){var d={};d[a]=b;var e=JSON.stringify(d);if(!c){return db.collection("templates").doc(a).set(b).then(function(){return console.log("Template successfully updated!"),b}).catch(function(a){console.error("Error updating document: ",a)})}localStorage.setItem("previewTemplate",e)},setTemplates=function(b){var c=(JSON.stringify(b),db.batch());return a.each(b,function(a,b){var d=db.collection("templates").doc(a);c.set(d,b)}),c.commit().then(function(){console.log("Templates successfully updated!")}).catch(function(a){console.error("Error updating document: ",a)})},getProductId=function(){var a=localStorage.getItem("selectedProductId");return a&&"undefined"!=a||(a=setProductId()),a},setProductId=function(a){return a||(a="empty"),localStorage.setItem("selectedProductId",a),localStorage.getItem("selectedProductId")},getTemplateId=function(){var a=localStorage.getItem("selectedTemplateId");return a&&"undefined"!=a||(a=setTemplateId()),a},setTemplateId=function(a){return a||(a="product-description"),localStorage.setItem("selectedTemplateId",a),localStorage.getItem("selectedTemplateId")},getContentName=function(){var a=getProductId();return getContent().then(function(b){return b[a].title})},getTemplateItems=function(){return getTemplates().then(function(b){var c=[];return a.each(b,function(a,b){c.push({id:a,title:b.title})}),c.sort(function(a,b){return a.title.localeCompare(b.title)}),c})},getContentItems=function(b){return void 0==b&&(b=!1),getContent().then(function(c){var d=[];return a.each(c,function(a,c){(b||"empty"!=a.substring(0,5))&&d.push({id:a,type:c.type,title:c.title})}),d.sort(function(a,b){return a.title.localeCompare(b.title)}),d})},populateTemplateItems=function(){return getTemplateItems().then(function(b){b.forEach(function(b){a("#template-items").append(a("<option></option>").attr("value",b.id).text(b.title))}),console.log(getTemplateId()),a("#template-items").val(getTemplateId())})},populateContentItems=function(b){return getContentItems(b).then(function(b){a("#content-items").html("");var c=getTemplateId();b.filter(function(a){return a.type===c||"all"===a.type}).forEach(function(b){a("#content-items").append(a("<option></option>").attr("value",b.id).text(b.title)),a("#preview-content ul.dropdown-menu").append(a('<li><a data-width="auto" title="'+b.id+'"><span>'+b.title+"</span></li>")),b.id===getProductId()&&a("#preview-content-select span").html(b.title)}),a("#content-items").val(getProductId())})},createElement=function(a,b){var c="";switch(b.type){case"text":c='<textarea class="form-control text" id="'+a+'" data-id="'+a+'" data-type="'+b.type+'"></textarea>';break;case"rich-text":c='<textarea class="form-control rich-text" id="'+a+'" data-id="'+a+'"data-type="'+b.type+'"></textarea>';break;case"list":c='<textarea class="form-control list" id="'+a+'" data-id="'+a+'" data-type="'+b.type+'"></textarea>';break;case"quote":c='<textarea class="form-control blockquote" id="'+a+'" data-type="'+b.type+'"></textarea>';break;case"image":c='<div id="'+a+'" data-type="'+b.type+'"></div>'}return c},getContentTypeFromClass=function(b){var c=a(b).attr("class").split(" "),d=c.filter(function(a){return"string"==typeof a&&a.indexOf("content-")>-1}),e=d.map(function(a){return a.substring(8)})[0];return void 0==e&&(e="text"),e},separateContent=function(b){var c=["blockquote","img"],d=a.parseHTML(b),e=d.filter(function(a){return"#text"!=a.nodeName}),f=[],b={},g=0;return e.forEach(function(a){g=c.indexOf(a.nodeName.toLowerCase()),g>=0?(b&&f.push(b),b={},"img"==c[g]?(b.type="image",b.content=a.outerHTML):(b.type=c[g],b.content=a.innerHTML),f.push(b)):void 0==b||"text"!=b.type?(b={},b.type="text",b.content=""):b.content+=a.innerHTML}),f.push(b),f},wrapWithParagraph=function(b,c){var d=a(b);return a.each(c,function(c,e){d=a(b+" "+e).wrapInner("<p></p>")}),d},convertHtmlToMarkdown=function(a){var b={link_list:!1,h1_setext:!0,h2_setext:!0,h_atx_suf:!1,gfm_code:"```",trim_code:!0,li_bullet:"*",hr_char:"-",indnt_str:"    ",bold_char:"*",emph_char:"_",gfm_del:!0,gfm_tbls:!0,tbl_edges:!1,hash_lnks:!1,br_only:!1,col_pre:"col ",nbsp_spc:!1,span_tags:!0,div_tags:!0,unsup_tags:{ignore:"script style noscript",inline:"span sup sub i u b center big",block2:"div form fieldset dl header footer address article aside figure hgroup section",block1c:"dt dd caption legend figcaption output",block2c:"canvas audio video iframe"},tag_remap:{i:"em",b:"strong"}};return new reMarked(b).render(a)},convertMarkdownToHtml=function(a){return(new showdown.Converter).makeHtml(a)},convertPropertiesToMarkdown=function(b){return a.each(b.content,function(c,d){a.each(d,function(a,d){b.content[c][a]=convertHtmlToMarkdown(d)})}),b},getURLParameter=function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}},setURLParameter=function(a,b){var c=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+a+"="+b;window.history.pushState({path:c},"",c)},slugify=function(a){return a.toLowerCase().split(" ").join("-")}}(jQuery);var firebaseConfig={apiKey:"AIzaSyC1oK8OilCE_f6tBdsKkCSEScjnhNWVelU",authDomain:"retail-tooling-cms.firebaseapp.com",databaseURL:"https://retail-tooling-cms.firebaseio.com",projectId:"retail-tooling-cms",storageBucket:"retail-tooling-cms.appspot.com",messagingSenderId:"73299715568"};firebase.initializeApp(firebaseConfig);var db=firebase.firestore();!function(){$.fn.gridEditor.RTEs.ckeditor={init:function(a,b){window.CKEDITOR||console.error("CKEditor not available! Make sure you loaded the ckeditor and jquery adapter js files.");var c=this;b.each(function(){var b=$(this);if(!b.hasClass("active")){b.html()==c.initialContent&&b.html("&nbsp;"),b.addClass("active").attr("contenteditable","true");var d=$.extend({},a.ckeditor&&a.ckeditor.config?a.ckeditor.config:{},{on:{instanceReady:function(b){var c;try{c=a.ckeditor.config.on.instanceReady}catch(a){}c&&c.call(this,b),e.focus()}}}),e=CKEDITOR.inline(b.get(0),d)}})},deinit:function(a,b){b.filter(".active").each(function(){var a=$(this);$.each(CKEDITOR.instances,function(a,b){b.destroy()}),a.removeClass("active cke_focus").removeAttr("id").removeAttr("style").removeAttr("spellcheck").removeAttr("contenteditable")})},initialContent:"<p>Lorem initius... </p>"}}(),function(){$.fn.gridEditor.RTEs.summernote={init:function(a,b){jQuery().summernote||console.error("Summernote not available! Make sure you loaded the Summernote js file.");var c=this;b.each(function(){var b=$(this);if(!b.hasClass("active")){b.html()==c.initialContent&&b.html(""),b.addClass("active");var d=$.extend(!0,{},a.summernote&&a.summernote.config?a.summernote.config:{},{tabsize:2,airMode:!0,callbacks:{onInit:function(){var c;try{c=a.summernote.config.callbacks.onInit}catch(a){}c&&c.call(this),b.summernote("focus")}}});b.summernote(d)}})},deinit:function(a,b){b.filter(".active").each(function(){var a=$(this);a.summernote("destroy"),a.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>Lorem ipsum dolores</p>"}}(),function(){$.fn.gridEditor.RTEs.tinymce={init:function(a,b){window.tinymce||console.error("tinyMCE not available! Make sure you loaded the tinyMCE js file."),b.tinymce||console.error("tinyMCE jquery integration not available! Make sure you loaded the jquery integration plugin.");var c=this;b.each(function(){var b=$(this);if(!b.hasClass("active")){b.html()==c.initialContent&&b.html(""),b.addClass("active");var d=$.extend({},a.tinymce&&a.tinymce.config?a.tinymce.config:{},{inline:!0,oninit:function(b){$("#"+b.settings.id).focus();var c;try{c=a.tinymce.config.oninit}catch(a){}c&&c.call(this)}});b.tinymce(d)}})},deinit:function(a,b){b.filter(".active").each(function(){var a=$(this),b=a.tinymce();b&&b.remove(),a.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>No content</p>"}}();
//# sourceMappingURL=jquery.grideditor.min.js.map